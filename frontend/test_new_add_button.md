# 新增+按钮功能测试验证

## 功能概述

已在搜索框旁边添加了+按钮，支持：
1. 新增知识库
2. 新增文档（带二级菜单选择知识库）

## 功能详情

### ✅ 1. 搜索框+按钮位置
- **位置**: 搜索框右侧，与搜索框并排显示
- **样式**: 白色背景，灰色边框，悬停效果
- **图标**: Plus图标，16px大小

### ✅ 2. 新增知识库
- **操作**: 点击+按钮 → 选择"新增知识库"
- **交互**: 弹出命名对话框
- **结果**: 创建新的知识库根节点

### ✅ 3. 新增文档（二级菜单）
- **一级菜单**: 点击+按钮 → 选择"新增文档"
- **二级菜单**: 显示知识库列表供选择
- **选项**:
  - "顶级文档" - 创建在根级别
  - 具体知识库 - 创建在指定知识库下
- **交互**: 选择知识库后弹出命名对话框

### ✅ 4. 用户体验优化
- **下拉菜单**: 点击外部自动关闭
- **滚动支持**: 知识库列表支持滚动（最大高度12rem）
- **视觉反馈**: 悬停高亮效果
- **图标区分**: 
  - 📚 知识库图标
  - 📄 文档图标

### ✅ 5. 国际化支持
- **中文界面**: "新增知识库"、"新增文档"、"选择知识库"
- **英文界面**: "New Knowledge Base"、"New Document"、"Select Knowledge Base"

## 技术实现

### 组件结构
```typescript
// AddButton 组件
- useState: 控制菜单开关状态
- useRef: 处理点击外部关闭
- useEffect: 添加全局点击事件监听

// 二级菜单逻辑
- showDocMenu: 控制文档选择菜单显示
- nodes.filter: 动态获取知识库列表
- handleCreateDocInKb: 处理不同层级的文档创建
```

### 样式设计
```css
搜索框区域: flex布局，并排显示
+按钮: 固定宽度，与搜索框对齐
下拉菜单: 绝对定位，右对齐
二级菜单: 分隔线，滚动支持
```

## 测试步骤

1. **打开应用**: http://localhost:3002
2. **点击+按钮**: 在搜索框右侧
3. **测试新增知识库**:
   - 选择"新增知识库"
   - 输入名称
   - 验证创建成功
4. **测试新增文档**:
   - 选择"新增文档"
   - 选择知识库或顶级
   - 输入文档名称
   - 验证创建位置正确

## 兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ✅ 移动端触摸支持

## 总结

新增+按钮功能已完整实现，提供了直观的新增知识库和文档创建体验，支持二级菜单选择知识库，符合用户操作习惯。