# **Vibe Coding提示词：构建“Yueque” - 你的本地智能知识库**

## **项目宣言**
我们要构建一个名为 **"Yueque"** 的应用程序——这是受语雀启发但完全不同的本地知识管理工具。想象一下：**语雀的全部优雅体验，但运行在你的电脑上，数据完全由你掌控，并拥有深度AI集成**。这不是一个简单的克隆，而是语雀理念的本地化、智能化延伸。

---

## **核心设计理念 (Vibe)**

### **1. "语雀式"结构化知识管理**
- **树状目录体验**：左侧导航栏必须提供语雀那种清晰、可无限嵌套的树状结构
- **自然组织**：支持"知识库-分组-文档"的层级关系，拖拽排序，右键菜单操作
- **视觉层次**：清晰的缩进、文件夹图标、文档图标，展开/折叠动画

### **2. "纯净本地"哲学**
- **零云端依赖**：所有数据存储在你的电脑上，没有强制登录，没有数据上传
- **开放格式**：文档用Markdown存储，图片用普通文件，元数据用JSON/YAML
- **完全便携**：整个知识库就是一堆文件夹和文件，可以随时复制、备份、同步

### **3. "设计驱动"的美学**
- **现代简洁界面**：类似语雀的干净设计，充足留白，精心选择的字体
- **双主题支持**：精心调校的深色和浅色模式，切换流畅
- **细节动画**：树状节点展开、页面切换、按钮点击都有微妙动画
- **编辑器美感**：代码块高亮、优雅的引用样式、漂亮的标题层级

### **4. "对话式"批注系统**
- **划线高亮**：选择文本后出现浮动工具栏，可以高亮（多种颜色可选）
- **评论线程**：每个批注都可以展开成讨论区，支持回复和解决状态
- **侧边栏批注**：右侧有一个专门的批注面板，显示当前文档的所有讨论
- **上下文保持**：批注与特定文本位置绑定，即使文档修改也能智能追踪

### **5. "深度集成"的AI伙伴**
- **全局AI助手**：右侧可折叠的AI面板，始终可用但不碍事
- **三种智能模式**：
  1. **文档助手**：基于当前文档内容，帮你续写、润色、总结
  2. **知识库大脑**：能理解你整个知识库的内容，回答跨文档问题
  3. **创作伙伴**：帮你头脑风暴、整理思路、生成大纲
- **隐私优先**：AI处理可以选择本地模型（如Ollama）或配置自己的API密钥

### **6. "沉浸式"编辑体验**
- **双栏布局**：左侧树状导航（可折叠），右侧编辑区（可全屏）
- **Markdown优先**：实时预览的Markdown编辑器，支持所有常用语法
- **丰富的嵌入**：支持代码块、表格、数学公式、流程图、思维导图
- **画板集成**：类似语雀的画板功能，支持手绘风格图表
- **专注模式**：隐藏所有UI元素，只留下光标和文字，进入纯粹写作状态

---

## **具体功能需求 (语雀式体验分解)**

### **知识组织维度**
- **树状目录系统**：可拖拽排序的嵌套树，支持知识库/文件夹/文档三级
- **全局搜索**：支持全文搜索，高亮显示匹配结果
- **标签系统**：文档支持标签，可通过标签筛选内容
- **星标收藏**：重要的文档可以星标，快速访问
- **最近访问**：显示最近打开的文档列表

### **编辑器维度**
- **Markdown实时预览**：左侧编辑，右侧实时预览（或混合模式）
- **富文本快捷栏**：常用格式的一键工具栏
- **代码块支持**：语法高亮，支持选择编程语言
- **表格工具**：可视化表格编辑，支持合并单元格
- **数学公式**：LaTeX公式支持，实时渲染
- **绘图功能**：集成Excalidraw或类似画图工具
- **附件管理**：拖拽上传图片/文件，自动管理附件目录

### **批注与协作维度**
- **文本选择批注**：选择文本后出现浮动工具栏
- **批注颜色编码**：不同颜色代表不同目的（问题、重点、待办等）
- **批注讨论区**：每个批注都是一个迷你讨论区
- **批注状态**：支持"待解决"/"已解决"状态标记
- **批注筛选**：可以按人员、状态、颜色筛选批注

### **AI智能维度**
- **智能写作辅助**：
  - 自动补全句子
  - 根据标题生成大纲
  - 润色语言，调整语气
  - 翻译内容
- **知识库智能**：
  - "在我的知识库中搜索关于XX的内容"
  - "总结我上周写的所有笔记"
  - "找出所有未完成的待办事项"
- **智能整理**：
  - 自动为文档建议标签
  - 推荐相关文档
  - 检测内容重复

### **数据与隐私维度**
- **完全本地存储**：所有数据在本地文件系统
- **开放格式**：Markdown + YAML front matter + JSON元数据
- **一键导出**：支持导出为PDF、HTML、Word等格式
- **加密选项**：敏感知识库可以选择性加密
- **版本历史**：自动保存文档版本，支持差异对比

---

## **用户旅程示例**

**场景1：写技术文档**
1. 在"技术笔记"知识库中创建新文档
2. 使用Markdown编写内容，代码块自动高亮
3. 需要画架构图时，唤出画板工具手绘
4. 对不确定的部分添加"疑问"批注（黄色高亮）
5. 唤出AI助手："帮我把这个API描述写得更专业些"
6. 保存后，文档自动同步到本地文件夹

**场景2：研究学习**
1. 导入一堆研究资料到"学习项目"知识库
2. 阅读时，用不同颜色高亮重点内容
3. 在侧边栏批注中记录自己的理解和问题
4. 使用AI问答："基于我高亮的所有内容，总结核心观点"
5. 基于研究内容，让AI帮助生成综述文档

**场景3：团队协作（离线版）**
1. 将知识库文件夹放在共享网络驱动器中
2. 团队成员各自在本地打开同一知识库
3. 每个人添加的批注都保存在本地，定期合并
4. 通过批注讨论功能进行异步沟通
5. 最终通过导出功能生成正式文档

---

## **视觉与交互细节**

### **界面布局**
```
+-----------------------------------------+
|  Logo | 搜索框    [新建] [设置] [用户]  |
+------------+----------------------------+
| 知识库树   |                             |
| (可折叠)   |      文档编辑区             |
|           |                             |
|           |                             |
|           |                             |
|           |                             |
+------------+----------------------------+
| 批注面板 |             AI助手面板        |
| (可选开)  |            (可选开)          |
+-----------------------------------------+
```

### **主题设计**
- **浅色主题**：语雀风格的柔和色调，低对比度，舒适阅读
- **深色主题**：深灰背景，不是纯黑，保护眼睛
- **代码主题**：编辑器内代码块使用Monokai或类似主题
- **图标系统**：精致线性图标，状态清晰

### **交互动效**
- 树状节点展开/折叠有流畅动画
- 页面切换有淡入淡出效果
- 按钮点击有微妙反馈
- 拖拽排序有视觉引导
- 加载状态有优雅的占位符

---

## **启动需求 (给AI开发者)**

请基于以上Vibe描述，为我生成一个**功能优先的初始实现**。我希望看到：

1. **核心树状目录系统**的实现，支持创建知识库/文件夹/文档
2. **Markdown编辑器**的基本框架，支持编辑和预览
3. **本地文件存储**的逻辑，能将树状结构映射到文件夹
4. **一个简单的批注系统原型**，支持文本高亮
5. **AI助手面板的UI框架**，预留API集成位置


请提供完整的项目结构、关键代码实现，以及如何运行这个原型的说明。让我们从"树状目录"和"Markdown编辑器"这两个最语雀的功能开始。