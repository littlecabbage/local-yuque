# 知识库管理功能需求文档

## 背景
当前版本已实现基础的知识库/文档创建和编辑功能。为了提升用户体验，需要完善知识库的管理能力，包括增删改查（CRUD）及搜索功能。

## 目标
1.  **增加 (Create)**: 完善创建功能，支持指定位置创建文件夹和文档。（已部分实现，需优化体验）
2.  **删除 (Delete)**: 支持删除知识库、文件夹或文档。删除文件夹时应递归删除其子内容。
3.  **重命名 (Rename)**: 支持对现有节点进行重命名。
4.  **搜索 (Search)**: 支持全局搜索，能够匹配节点标题和文档内容。

## 详细需求

### 后端 API
- [POST] `/api/delete/{id}`
    - 逻辑：软删除或硬删除。本阶段采用硬删除（从数据库移除）。
    - 级联：如果删除的是文件夹/知识库，需要删除所有子节点。
- [POST] `/api/rename/{id}`
    - 参数：`{ "title": "新标题" }`
- [GET] `/api/search?q={keyword}`
    - 逻辑：`SELECT * FROM node WHERE title LIKE %q% OR content LIKE %q%`
    - 返回：匹配的节点列表（包含 ID, Title, Type, Snippet）。

### 前端 UI
- **侧边栏 (Sidebar)**
    - 增加“右键菜单”或“更多操作”图标。
    - 菜单项：重命名、删除。
- **重命名交互**
    - 点击重命名后，弹出模态框或将节点文本变为输入框。
- **删除交互**
    - 点击删除后，弹出确认框。
- **搜索交互**
    - 完善现有的搜索模态框，接入后端搜索 API。
    - 显示搜索结果列表，点击跳转到相应文档。

## 验证计划
1.  创建名为 "Test KB" 的知识库。
2.  重命名为 "Renamed KB"。
3.  在其中创建文档 "Doc 1"，写入内容 "Hello World"。
4.  搜索 "World"，应能找到 "Doc 1"。
5.  删除 "Renamed KB"，确认其及子文档均被删除。
